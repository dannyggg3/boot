{
  "annotations": { "list": [] },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [
    { "asDropdown": true, "icon": "external link", "includeVars": true, "keepTime": true, "tags": ["sath"], "targetBlank": false, "title": "SATH Dashboards", "type": "dashboards" }
  ],
  "liveNow": true,
  "panels": [
    {
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "id": 99,
      "options": { "code": { "language": "plaintext", "showLineNumbers": false, "showMiniMap": false }, "content": "# Live Activity - SATH v1.7+\n**Actividad en Tiempo Real** | Decisiones, MTF Analysis y Senales del bot", "mode": "markdown" },
      "title": "",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "blue", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 2 },
      "id": 1,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["count"], "fields": "", "values": false }, "textMode": "auto" },
      "title": "Total Decisiones",
      "type": "stat",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 2 },
      "id": 2,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["count"], "fields": "", "values": false }, "textMode": "auto" },
      "title": "Senales COMPRA",
      "type": "stat",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r.decision == \"COMPRA\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "red", "value": null }] },
          "unit": "short"
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 12, "y": 2 },
      "id": 3,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["count"], "fields": "", "values": false }, "textMode": "auto" },
      "title": "Senales VENTA",
      "type": "stat",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r.decision == \"VENTA\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "yellow", "value": null }, { "color": "green", "value": 0.7 }, { "color": "super-light-green", "value": 0.9 }] },
          "unit": "percentunit", "decimals": 0
        }
      },
      "gridPos": { "h": 4, "w": 6, "x": 18, "y": 2 },
      "id": 4,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false }, "textMode": "auto" },
      "title": "Confianza Promedio",
      "type": "stat",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> mean()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "scheme", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "line" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "red", "value": null }, { "color": "green", "value": 0.65 }] },
          "unit": "percentunit"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 6 },
      "id": 5,
      "options": { "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "title": "Confianza por Simbolo",
      "type": "timeseries",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r._field == \"confidence\")", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "scheme", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "line" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "yellow", "value": null }, { "color": "green", "value": 0.7 }] },
          "unit": "percentunit"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 6 },
      "id": 6,
      "options": { "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "title": "MTF Alignment Score",
      "type": "timeseries",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"mtf_analysis\")\n  |> filter(fn: (r) => r._field == \"alignment_score\")", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "mappings": [], "unit": "short" } },
      "gridPos": { "h": 6, "w": 8, "x": 0, "y": 14 },
      "id": 7,
      "options": { "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "donut", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "title": "Decisiones por Simbolo",
      "type": "piechart",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> group(columns: [\"symbol\"])\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "mappings": [], "unit": "short" } },
      "gridPos": { "h": 6, "w": 8, "x": 8, "y": 14 },
      "id": 8,
      "options": { "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "donut", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "title": "Decisiones por Tipo",
      "type": "piechart",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> filter(fn: (r) => r._field == \"confidence\")\n  |> group(columns: [\"decision\"])\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "mappings": [], "unit": "short" } },
      "gridPos": { "h": 6, "w": 8, "x": 16, "y": 14 },
      "id": 9,
      "options": { "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "donut", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "title": "Senales MTF",
      "type": "piechart",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"mtf_analysis\")\n  |> filter(fn: (r) => r._field == \"alignment_score\")\n  |> group(columns: [\"signal\"])\n  |> count()", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "custom": { "align": "auto", "displayMode": "auto", "inspect": false },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "confidence" }, "properties": [{ "id": "unit", "value": "percentunit" }, { "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "color-background" } }, { "id": "thresholds", "value": { "mode": "absolute", "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 0.5 }, { "color": "green", "value": 0.65 }] } }] },
          { "matcher": { "id": "byName", "options": "rsi" }, "properties": [{ "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "color-background" } }, { "id": "thresholds", "value": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 30 }, { "color": "orange", "value": 70 }, { "color": "red", "value": 80 }] } }] },
          { "matcher": { "id": "byName", "options": "decision" }, "properties": [{ "id": "custom.cellOptions", "value": { "mode": "basic", "type": "color-background" } }, { "id": "mappings", "value": [{ "options": { "COMPRA": { "color": "green", "index": 0 }, "VENTA": { "color": "red", "index": 1 }, "ESPERA": { "color": "yellow", "index": 2 } }, "type": "value" }] }] }
        ]
      },
      "gridPos": { "h": 10, "w": 24, "x": 0, "y": 20 },
      "id": 10,
      "options": { "showHeader": true, "sortBy": [{ "desc": true, "displayName": "_time" }] },
      "title": "Ultimas Decisiones de Trading",
      "type": "table",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"trading_decision\")\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> keep(columns: [\"_time\", \"symbol\", \"decision\", \"confidence\", \"agent_type\", \"rsi\", \"price\", \"reasoning\"])\n  |> sort(columns: [\"_time\"], desc: true)\n  |> limit(n: 30)", "refId": "A" }]
    },
    {
      "datasource": { "type": "influxdb", "uid": "influxdb-sath" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "custom": { "align": "auto", "displayMode": "auto", "inspect": false },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "alignment_score" }, "properties": [{ "id": "unit", "value": "percentunit" }, { "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "color-background" } }, { "id": "thresholds", "value": { "mode": "absolute", "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 0.5 }, { "color": "green", "value": 0.7 }] } }] },
          { "matcher": { "id": "byName", "options": "signal" }, "properties": [{ "id": "custom.cellOptions", "value": { "mode": "basic", "type": "color-background" } }, { "id": "mappings", "value": [{ "options": { "COMPRA": { "color": "green", "index": 0 }, "VENTA": { "color": "red", "index": 1 }, "ESPERA": { "color": "yellow", "index": 2 } }, "type": "value" }] }] }
        ]
      },
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 30 },
      "id": 11,
      "options": { "showHeader": true, "sortBy": [{ "desc": true, "displayName": "_time" }] },
      "title": "Ultimos Analisis MTF",
      "type": "table",
      "targets": [{ "query": "from(bucket: \"trading_decisions\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"mtf_analysis\")\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> keep(columns: [\"_time\", \"symbol\", \"signal\", \"alignment_score\", \"confidence_boost\", \"higher_direction\", \"medium_direction\", \"lower_direction\"])\n  |> sort(columns: [\"_time\"], desc: true)\n  |> limit(n: 30)", "refId": "A" }]
    }
  ],
  "refresh": "10s",
  "schemaVersion": 38,
  "style": "dark",
  "tags": ["sath", "trading", "live", "activity"],
  "templating": { "list": [] },
  "time": { "from": "now-6h", "to": "now" },
  "timepicker": { "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"] },
  "timezone": "browser",
  "title": "0. Live Activity",
  "uid": "sath-live",
  "version": 1
}
