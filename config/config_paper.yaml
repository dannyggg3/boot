# ============================================
# CONFIGURACION PAPER (TESTNET) - SATH v2.2 OPTIMIZADO
# Capital: $1000 USD
# Nivel: Institucional (filtros balanceados)
# Filosofia: Trades de calidad + frecuencia suficiente para validar
# OPTIMIZADO: Para generar trades y validar rentabilidad
# ============================================

# ===== SELECCION DE PROVEEDOR DE IA =====
ai_provider: "deepseek"
ai_model: "deepseek-chat"

# ===== ARQUITECTURA HIBRIDA - OPTIMIZADA PARA VELOCIDAD =====
# v2.2: Usar modelo fast por defecto para reducir latencia
ai_use_hybrid_analysis: true
ai_model_fast: "deepseek-chat"      # Rapido y economico
ai_model_deep: "deepseek-chat"      # CAMBIO: Usar chat tambien para evitar latencia de 40s

# ===== AGENTES ESPECIALIZADOS v2.2 =====
ai_agents:
  enabled: true
  # v2.2 OPTIMIZADO: Thresholds mas permisivos para generar trades
  min_volatility_percent: 0.3    # De 0.5 a 0.3 - mas oportunidades
  min_volume_ratio: 0.8          # De 1.0 a 0.8 - mas flexible
  ideal_volume_ratio: 1.2        # Ideal para trades de alta probabilidad
  max_retries: 2                 # Menos reintentos = mas rapido
  retry_delay_seconds: 1         # Delay reducido
  min_adx_trend: 20              # v2.2: De 25 a 20 - permite transiciones

# ===== SELECCION DE MERCADO =====
market_type: "crypto"

# ===== CONFIGURACION DE TRADING =====
trading:
  # Con $1000: 3 pares liquidos
  symbols:
    - "BTC/USDT"   # Alta liquidez
    - "ETH/USDT"   # Segunda mas liquida
    - "SOL/USDT"   # Mayor volatilidad

  timeframe: "15m"
  scan_interval: 120  # v2.2: Reducido de 180 a 120 - mas escaneos

  mode: "paper"

  parallel_analysis: true
  max_parallel_workers: 3

  # v2.2: Verificacion de precio mas tolerante en paper
  price_verification:
    enabled: true
    max_deviation_percent: 0.5    # De 0.3 a 0.5 - mas tolerante

  order_execution:
    use_limit_orders: true
    max_slippage_percent: 0.25    # De 0.2 a 0.25
    limit_order_timeout: 30
    on_timeout: "cancel"

  advanced_data:
    enabled: true
    order_book: true
    funding_rate: true
    open_interest: true
    correlations: true

# ===== GESTION DE RIESGO v2.2 - $1000 OPTIMIZADO =====
risk_management:
  # v2.2: Riesgo por trade aumentado para posiciones viables
  max_risk_per_trade: 3.0         # De 2.5 a 3.0 = $30 por trade

  # Drawdown maximo diario
  max_daily_drawdown: 10.0        # De 8 a 10% = $100

  # R/R minimo 1.8:1 (mas oportunidades que 2:1)
  min_risk_reward_ratio: 1.8

  use_trailing_stop: true
  trailing_stop_percentage: 2.0

  # CAPITAL $1000
  initial_capital: 1000

  leverage: 1  # Sin apalancamiento

  # v2.2 Kelly Criterion OPTIMIZADO
  kelly_criterion:
    enabled: true
    fraction: 0.50                # De 0.40 a 0.50 - posiciones mas grandes
    min_confidence: 0.60          # v2.2: De 0.70 a 0.60 - mas trades
    max_risk_cap: 4.0             # De 3 a 4% en senales fuertes

  # v2.2 ATR-Based Stops - MAS AGRESIVOS
  atr_stops:
    enabled: true
    sl_multiplier: 1.8            # De 2.0 a 1.8 - SL mas cenido
    tp_multiplier: 3.6            # Mantiene R/R 2:1
    min_distance_percent: 1.0     # De 1.5 a 1.0
    max_distance_percent: 6.0     # Maximo 6%

  # v2.2 Session Filter - RELAJADO PARA PAPER
  session_filter:
    enabled: false                # Deshabilitado en paper para mas trades

  # ===== CONTROL DE COMISIONES =====
  fees:
    maker_fee_percent: 0.075
    taker_fee_percent: 0.075

  position_sizing:
    min_position_usd: 15.0        # De $20 a $15 - mas flexible
    min_profit_after_fees_usd: 1.00
    profit_to_fees_ratio: 5.0     # De 6x a 5x - menos restrictivo

  exchange_minimums:
    BTC_USDT: 5.0
    ETH_USDT: 5.0
    SOL_USDT: 5.0
    default: 10.0

# ===== GESTION DE POSICIONES v2.2 =====
position_management:
  enabled: true
  protection_mode: "oco"

  oco_settings:
    enabled: true
    sl_limit_buffer_percent: 0.2

  local_monitoring:
    enabled: true
    check_interval_ms: 500

  # v2.2 Trailing Stop OPTIMIZADO
  trailing_stop:
    enabled: true
    activation_profit_percent: 1.5  # De 2.0 a 1.5 - activa antes
    trail_distance_percent: 0.8     # De 1.0 a 0.8 - mas ajustado
    min_profit_to_lock: 0.5         # Asegurar 0.5% al activar
    cooldown_seconds: 10            # De 15 a 10
    min_safety_margin_percent: 0.3

  supervision:
    enabled: true
    check_interval_seconds: 90      # De 60 a 90 - menos overhead
    actions_allowed:
      - "HOLD"
      - "TIGHTEN_SL"
      - "EXTEND_TP"

  # v2.2 Portfolio OPTIMIZADO para $1000
  portfolio:
    max_concurrent_positions: 2     # 2 posiciones simultaneas
    max_exposure_percent: 70        # De 65 a 70% = $700 efectivos
    max_per_symbol_percent: 50      # De 40 a 50% por simbolo

  database:
    path: "data/positions.db"

# ===== ANALISIS TECNICO v2.2 =====
technical_analysis:
  min_candles: 100                  # De 150 a 100 - mas rapido

  indicators:
    rsi:
      enabled: true
      period: 14
      overbought: 70
      oversold: 30
    ema:
      enabled: true
      short_period: 50
      long_period: 200
    bollinger_bands:
      enabled: true
      period: 20
      std_dev: 2
    atr:
      enabled: true
      period: 14
    macd:
      enabled: true
      fast_period: 12
      slow_period: 26
      signal_period: 9
    adx:
      enabled: true
      period: 14

# ===== EXCHANGES =====
exchanges:
  binance:
    enabled: true
    testnet: true

# ===== NOTIFICACIONES =====
notifications:
  telegram:
    enabled: true
  email:
    enabled: false

# ===== DATA LOGGING =====
data_logging:
  enabled: true

# ===== WEBSOCKETS =====
websockets:
  enabled: true
  orderbook: true
  ticker: true
  trades: true
  orderbook_depth: 10

# ===== SIMULACION PAPER - REALISTA =====
paper_simulation:
  min_latency_ms: 30               # Latencia reducida
  max_latency_ms: 150
  base_slippage_percent: 0.03      # Slippage reducido
  max_slippage_percent: 0.10
  failure_rate: 0.01               # Menos fallos

# ===== VALIDACION DE LIQUIDEZ =====
liquidity_validation:
  enabled: true
  max_slippage_percent: 0.4        # De 0.3 a 0.4
  min_spread_warning: 0.20
  max_spread_reject: 0.50          # De 0.35 a 0.50
  min_order_book_depth_usd: 300    # De 500 a 300

# ===== LOGGING =====
logging:
  level: "INFO"
  file: "logs/trading_bot.log"
  backup_count: 30
  heartbeat_interval: 60

# ===== SEGURIDAD =====
security:
  kill_switch:
    enabled: true
    max_loss_percentage: 10.0      # $100 de perdida maxima
    cooldown_period_hours: 12      # De 24 a 12 horas
  api_rate_limit:
    requests_per_minute: 60
    wait_on_limit: true

# ===== MULTI-TIMEFRAME v2.2 - PROFESIONAL =====
multi_timeframe:
  enabled: true
  higher_timeframe: "4h"
  medium_timeframe: "1h"
  lower_timeframe: "15m"
  min_alignment_score: 0.50        # v2.2.1: 50% = al menos 2/3 TFs alineados
  weights:
    higher: 0.40                   # TF alto importante para direccion
    medium: 0.35
    lower: 0.25                    # TF bajo para timing

# ===== FILTRO DE CORRELACION =====
correlation_filter:
  enabled: true
  max_correlation: 0.80            # De 0.70 a 0.80 - mas flexible
  correlations:
    "BTC/USDT,ETH/USDT": 0.85
    "BTC/USDT,SOL/USDT": 0.78
    "ETH/USDT,SOL/USDT": 0.82

# ===== PARAMETROS ADAPTATIVOS v2.2.1 - PROFESIONAL =====
adaptive_parameters:
  enabled: true
  lookback_trades: 15              # Balance entre reaccion y estabilidad
  sensitivity: 0.20                # Conservador - no sobreajustar
  default_min_confidence: 0.55     # v2.2.1: Profesional pero permite paper testing
  ranges:
    min_confidence: { min: 0.50, max: 0.75 }   # No operar bajo 50% confianza
    max_risk_per_trade: { min: 1.5, max: 3.0 } # Riesgo controlado
    trailing_activation: { min: 1.0, max: 3.0 }

# ===== PERFORMANCE ATTRIBUTION =====
performance_attribution:
  enabled: true
  log_interval_hours: 12           # De 24 a 12 horas
